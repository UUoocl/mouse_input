Event Listener (listener.html)
==============================

The **Event Listener** page is a diagnostic and demonstration tool included in the project. It serves as a proof-of-concept for the ``BroadcastChannel`` integration, showing how external tools can passively consume the data generated by the main Mouse Monitor.

.. image:: ../_static/listener_preview.png
   :align: center
   :alt: Preview of the listener interface (placeholder)

Purpose
-------

While `mouse_monitor.html` is the *producer* of event data (bridging OBS to the web), `listener.html` acts as a *consumer*. This decoupling allows developers to build complex overlays or logging tools without modifying the core input script.

Usage
-----

1.  **Launch the Monitor**: Ensure `mouse_monitor.html` is running (either in OBS or a browser tab) and receiving input.
2.  **Open the Listener**: Open `listener.html` in a separate tab or window within the same browser instance.
3.  **Observe**: Perform mouse actions. The raw JSON data will appear in the respective log columns of the Listener page.

Technical Implementation
------------------------

The page uses the native **BroadcastChannel API**.

.. code-block:: javascript

    // 1. Connect to the channel
    const clickChannel = new BroadcastChannel('mouse_click');

    // 2. Define the handler
    clickChannel.onmessage = (event) => {
        // 3. Process the payload (event.data)
        console.log("Received click:", event.data);
    };

Developer Commentary
--------------------

*   **Same Origin Policy**: BroadcastChannel only works if both the sender (`mouse_monitor.html`) and receiver (`listener.html`) are served from the same origin (same domain/protocol/port). If opening files locally, ensure you open both as `file://...` or serve them via a local web server.
*   **Performance**: The `mouse_move` channel can generate hundreds of events per second. The Listener page includes a buffer limit (50 entries) to prevent DOM memory leaks, but production applications should consider throttling or debouncing updates if simple visualization is the goal.
